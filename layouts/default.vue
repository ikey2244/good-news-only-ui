<template>
  <div class="max-w-screen-lg mx-auto">
    <div class="mx-6">
      <header class="flex w-full justify-between items-center mt-8">
        <nuxt-link to="/">
          <svg width="186" height="26" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6.48 19.336c-2.272 0-3.84-.528-4.704-1.584-.592-.736-.888-1.744-.888-3.024 0-.592.064-1.24.192-1.944l.84-4.8c.752-4.288 3.376-6.432 7.872-6.432 1.856 0 3.264.4 4.224 1.2.96.784 1.44 1.864 1.44 3.24 0 .56-.08 1.128-.24 1.704-.144.576-.288 1.008-.432 1.296l-.24.432h-4.248c.416-.576.624-1.24.624-1.992 0-1.44-.6-2.16-1.8-2.16-1.616 0-2.584.936-2.904 2.808L5.4 12.688c-.08.432-.12.856-.12 1.272 0 1.104.648 1.656 1.944 1.656 1.312 0 2.152-.656 2.52-1.968H7.776l.48-2.664h6.36l-.384 2.064-.12.696c-.672 3.728-3.216 5.592-7.632 5.592zM23.2899 7.12c1.728 0 3.032.376 3.912 1.128.688.592 1.032 1.416 1.032 2.472 0 .352-.04.736-.12 1.152l-.504 2.808c-.304 1.696-1.016 2.896-2.136 3.6-1.104.704-2.584 1.056-4.44 1.056-1.856 0-3.216-.352-4.08-1.056-.64-.528-.96-1.32-.96-2.376 0-.368.04-.776.12-1.224l.504-2.808c.56-3.168 2.784-4.752 6.672-4.752zm.648 5.232c.032-.16.048-.36.048-.6 0-.256-.104-.536-.312-.84-.208-.304-.576-.456-1.104-.456-.512 0-.944.176-1.296.528-.352.336-.576.792-.672 1.368l-.312 1.8c-.032.16-.048.368-.048.624 0 .24.104.504.312.792.208.288.568.432 1.08.432.528 0 .968-.176 1.32-.528.352-.368.576-.808.672-1.32l.312-1.8zM36.8368 7.12c1.728 0 3.032.376 3.912 1.128.688.592 1.032 1.416 1.032 2.472 0 .352-.04.736-.12 1.152l-.504 2.808c-.304 1.696-1.016 2.896-2.136 3.6-1.104.704-2.584 1.056-4.44 1.056-1.856 0-3.216-.352-4.08-1.056-.64-.528-.96-1.32-.96-2.376 0-.368.04-.776.12-1.224l.504-2.808c.56-3.168 2.784-4.752 6.672-4.752zm.648 5.232c.032-.16.048-.36.048-.6 0-.256-.104-.536-.312-.84-.208-.304-.576-.456-1.104-.456-.512 0-.944.176-1.296.528-.352.336-.576.792-.672 1.368l-.312 1.8c-.032.16-.048.368-.048.624 0 .24.104.504.312.792.208.288.568.432 1.08.432.528 0 .968-.176 1.32-.528.352-.368.576-.808.672-1.32l.312-1.8zM54.4637 15.304c0 .416.208.624.624.624.432 0 .792-.08 1.08-.24l-.12 2.712c-.768.624-1.632.936-2.592.936-1.76 0-2.736-.64-2.928-1.92-.8 1.28-1.976 1.92-3.528 1.92-2.624 0-3.936-1.128-3.936-3.384 0-.384.04-.808.12-1.272l.504-2.808c.256-1.44.84-2.584 1.752-3.432.928-.864 2.208-1.296 3.84-1.296 1.008 0 1.808.216 2.4.648l1.224-7.008003h4.104L54.4877 15.016c-.016.096-.024.192-.024.288zm-7.104-1.152c-.032.144-.048.344-.048.6s.12.512.36.768c.24.24.64.36 1.2.36.576 0 1.072-.224 1.488-.672l.72-4.032c-.176-.4-.592-.6-1.248-.6-1.232 0-1.952.592-2.16 1.776l-.312 1.8zM80.1756 1.72L77.1516 19h-4.344l-3.024-9.456L68.1516 19h-4.344l3.048-17.28h4.464l2.976 8.832 1.56-8.832h4.32zM85.4619 19.336c-3.328 0-4.992-1.152-4.992-3.456 0-.32.032-.664.096-1.032l.504-2.976c.272-1.536.976-2.712 2.112-3.528 1.152-.832 2.672-1.248 4.56-1.248 3.216 0 4.824 1.216 4.824 3.648 0 .352-.032.736-.096 1.152l-.288 1.704h-7.32l-.096.552c-.032.192-.048.368-.048.528 0 .88.52 1.32 1.56 1.32.384 0 .712-.12.984-.36s.432-.52.48-.84l3.984.048c-.528 2.992-2.616 4.488-6.264 4.488zm2.88-7.2c.064-.272.096-.52.096-.744 0-.24-.104-.48-.312-.72-.208-.24-.544-.36-1.008-.36-.448 0-.864.152-1.248.456-.368.304-.624.76-.768 1.368h3.24zM113.464 7.456c.224.672.336 1.568.336 2.688 0 1.104-.136 2.168-.408 3.192-.272 1.024-.688 2-1.248 2.928-.544.912-1.312 1.656-2.304 2.232-.976.56-2.104.84-3.384.84-1.92 0-3.2-.536-3.84-1.608-1.152 1.072-2.44 1.608-3.8639 1.608-1.92 0-3.24-.408-3.96-1.224-.48-.544-.72-1.352-.72-2.424 0-.56.064-1.184.192-1.872l1.128-6.36h4.08l-1.128 6.384c-.048.24-.072.456-.072.648 0 .912.472 1.368 1.416 1.368.6559 0 1.1519-.28 1.4879-.84.336-.576.624-1.576.864-3l.816-4.56h4.08l-1.128 6.384c-.048.24-.072.456-.072.648 0 .912.472 1.368 1.416 1.368 1.664 0 2.496-1.744 2.496-5.232 0-.816-.064-1.72-.192-2.712l-.072-.456h4.08zM127.161 9.952c0 .528-.16 1.016-.48 1.464h-3.936c.128-.096.192-.256.192-.48 0-.224-.128-.4-.384-.528-.256-.144-.584-.216-.984-.216-1.2 0-1.8.368-1.8 1.104 0 .288.224.496.672.624.448.128.992.232 1.632.312.64.08 1.28.2 1.92.36.64.144 1.184.44 1.632.888.448.448.672 1.048.672 1.8 0 1.328-.536 2.336-1.608 3.024-1.056.688-2.6 1.032-4.632 1.032-2.032 0-3.456-.328-4.272-.984-.64-.512-.96-1.216-.96-2.112 0-.256.024-.52.072-.792l4.008-.048c-.032.224.096.424.384.6.304.16.744.24 1.32.24.576 0 .992-.056 1.248-.168.256-.128.384-.36.384-.696 0-.224-.224-.376-.672-.456-.448-.096-1-.176-1.656-.24-.64-.064-1.288-.168-1.944-.312-.64-.144-1.184-.448-1.632-.912-.448-.464-.672-1.072-.672-1.824 0-1.456.56-2.576 1.68-3.36 1.136-.784 2.768-1.176 4.896-1.176 3.28 0 4.92.952 4.92 2.856zM143.362 1.552c3.856 0 5.784 1.576 5.784 4.728 0 .528-.056 1.096-.168 1.704l-.84 4.8c-.384 2.224-1.216 3.872-2.496 4.944s-3.08 1.608-5.4 1.608c-2.32 0-3.936-.536-4.848-1.608-.624-.736-.936-1.752-.936-3.048 0-.576.064-1.208.192-1.896l.84-4.8c.752-4.288 3.376-6.432 7.872-6.432zm-2.472 14.064c.8 0 1.44-.208 1.92-.624.48-.416.816-1.184 1.008-2.304l.816-4.608c.048-.32.072-.608.072-.864 0-1.296-.656-1.944-1.968-1.944-1.648.032-2.632.968-2.952 2.808l-.816 4.608c-.064.4-.096.816-.096 1.248 0 1.12.672 1.68 2.016 1.68zM157.764 11.632c0-.688-.336-1.032-1.008-1.032-.656 0-1.2.248-1.632.744L153.78 19h-4.08l2.04-11.544h3.792l-.264 1.416c.944-1.168 2.136-1.752 3.576-1.752s2.376.352 2.808 1.056c.272.448.408.96.408 1.536 0 .576-.04 1.112-.12 1.608l-.648 3.696c-.016.096-.024.184-.024.264 0 .432.24.648.72.648.368 0 .696-.08.984-.24l-.12 2.712c-.752.624-1.608.936-2.568.936-2.176 0-3.264-.912-3.264-2.736 0-.32.032-.664.096-1.032l.576-3.192c.048-.288.072-.536.072-.744zM168.844 15.304c0 .416.208.624.624.624.432 0 .792-.08 1.08-.24l-.12 2.712c-.768.624-1.632.936-2.592.936-1.456 0-2.4-.336-2.832-1.008-.272-.432-.408-.904-.408-1.416 0-.512.032-.96.096-1.344L167.308.783997h4.08L168.868 15.016c-.016.096-.024.192-.024.288zM176.628 13.84c-.048.288-.072.576-.072.864 0 .768.432 1.152 1.296 1.152.704 0 1.288-.248 1.752-.744l1.344-7.656h4.08l-2.112 11.928c-.352 2.032-1.16 3.64-2.424 4.824-1.248 1.184-2.68 1.776-4.296 1.776s-2.784-.296-3.504-.888c-.704-.592-1.056-1.368-1.056-2.328 0-1.36.84-2.568 2.52-3.624-.912-.224-1.488-.68-1.728-1.368-.144-.384-.216-.816-.216-1.296 0-.48.04-.968.12-1.464l1.344-7.56h4.08l-1.128 6.384zm.12 8.712c1.04 0 1.72-.944 2.04-2.832l.24-1.392c-2.224 1.04-3.336 2.088-3.336 3.144 0 .32.088.576.264.768.192.208.456.312.792.312z" fill="#7B93DB" />
          </svg>
        </nuxt-link>
        <div v-if="$apollo.queries.me.loading">
          ...loading
        </div>
        <div v-else class="flex">
          <h1 class="text-lg text-gray-600">
            Hello,
            <nuxt-link to="/account" class="text-indigo-500 underline">
              {{ me.username }}
            </nuxt-link>
          </h1>
          <button class="ml-4 underline" @click="logout">
            Logout
          </button>
        </div>
      </header>
      <nuxt />
    </div>
  </div>
</template>

<script>
import gql from 'graphql-tag'
export default {
  middleware: 'authCheck',
  apollo: {
    me: {
      query: gql`
        query me {
          me {
            id
            username
          }
        }
      `
    }
  },
  methods: {
    logout() {
      this.$apolloHelpers.onLogout()
    }
  }
}
</script>
